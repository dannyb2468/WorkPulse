<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorkPulse - Work Tracker</title>
    <meta name="description" content="Track projects, tasks, daily work, and value metrics">
    <meta name="theme-color" content="#0d9488">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icons/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="styles.css">
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
        import { getAuth, onAuthStateChanged, signInWithPopup, GoogleAuthProvider, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, updateProfile } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';
        import { getFirestore, doc, getDoc, setDoc } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';
        window.firebaseModules = { initializeApp, getAuth, onAuthStateChanged, signInWithPopup, GoogleAuthProvider, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, updateProfile, getFirestore, doc, getDoc, setDoc };
        window.dispatchEvent(new Event('firebase-ready'));
    </script>
</head>
<body>
    <!-- Sidebar -->
    <nav id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <img src="icons/icon.svg" alt="WorkPulse" class="sidebar-logo">
            <h1 class="sidebar-title">WorkPulse</h1>
            <button id="sidebar-close" class="btn-icon sidebar-close" aria-label="Close menu">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <ul class="nav-list">
            <li><a href="#dashboard" class="nav-link active" data-page="dashboard">
                <i class="fas fa-tachometer-alt"></i><span>Dashboard</span>
            </a></li>
            <li><a href="#projects" class="nav-link" data-page="projects">
                <i class="fas fa-folder-open"></i><span>Projects</span>
            </a></li>
            <li><a href="#kanban" class="nav-link" data-page="kanban">
                <i class="fas fa-columns"></i><span>Task Board</span>
            </a></li>
            <li><a href="#activity" class="nav-link" data-page="activity">
                <i class="fas fa-clock"></i><span>Activity Log</span>
            </a></li>
            <li><a href="#metrics" class="nav-link" data-page="metrics">
                <i class="fas fa-chart-line"></i><span>Metrics</span>
            </a></li>
            <li><a href="#reports" class="nav-link" data-page="reports">
                <i class="fas fa-file-alt"></i><span>Reports</span>
            </a></li>
            <li><a href="#settings" class="nav-link" data-page="settings">
                <i class="fas fa-cog"></i><span>Settings</span>
            </a></li>
        </ul>

        <div class="sidebar-footer">
            <div id="sync-status" class="sync-status" style="display:none;">
                <i class="fas fa-cloud"></i>
                <span>Not synced</span>
            </div>
            <div id="user-info" class="user-info" style="display:none;">
                <i class="fas fa-user-circle"></i>
                <span id="user-display-name">Not signed in</span>
            </div>
        </div>
    </nav>

    <!-- Mobile header -->
    <header id="mobile-header" class="mobile-header">
        <button id="sidebar-toggle" class="btn-icon" aria-label="Open menu">
            <i class="fas fa-bars"></i>
        </button>
        <h2 id="mobile-page-title" class="mobile-page-title">Dashboard</h2>
        <button id="theme-toggle-mobile" class="btn-icon" aria-label="Toggle theme">
            <i class="fas fa-moon"></i>
        </button>
    </header>

    <!-- Sidebar overlay for mobile -->
    <div id="sidebar-overlay" class="sidebar-overlay"></div>

    <!-- Main content -->
    <main id="main-content" class="main-content">
        <!-- Dashboard Page -->
        <section id="page-dashboard" class="page active">
            <div class="page-header">
                <div>
                    <h2 id="dashboard-greeting" class="page-title">Dashboard</h2>
                    <p class="page-subtitle">Your work at a glance</p>
                </div>
                <button id="theme-toggle" class="btn-icon" aria-label="Toggle theme">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
            <div id="dashboard-stats" class="stat-grid"></div>
            <div id="dashboard-content" class="dashboard-grid">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-folder-open"></i> Active Projects</h3>
                    <div id="dashboard-active-projects"></div>
                </div>
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-tasks"></i> Task Completion</h3>
                    <div class="chart-container"><canvas id="chart-task-completion"></canvas></div>
                </div>
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-clock"></i> Hours Saved</h3>
                    <div class="chart-container"><canvas id="chart-hours-saved"></canvas></div>
                </div>
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-stream"></i> Recent Activity</h3>
                    <div id="dashboard-recent-activity"></div>
                </div>
            </div>
            <div id="dashboard-deadlines" class="dashboard-section"></div>
            <div id="dashboard-snapshot" class="dashboard-section"></div>
        </section>

        <!-- Projects Page -->
        <section id="page-projects" class="page">
            <div class="page-header">
                <div>
                    <h2 class="page-title">Projects</h2>
                    <p class="page-subtitle">Manage your projects</p>
                </div>
                <button id="add-project-btn" class="btn btn-primary">
                    <i class="fas fa-plus"></i> New Project
                </button>
            </div>
            <div id="projects-filter-bar" class="filter-bar" style="display:none;">
                <select id="project-status-filter" class="form-select">
                    <option value="">All Statuses</option>
                    <option value="active">Active</option>
                    <option value="on-hold">On Hold</option>
                    <option value="completed">Completed</option>
                    <option value="archived">Archived</option>
                </select>
                <div class="search-input">
                    <i class="fas fa-search"></i>
                    <input type="text" id="project-search" class="form-input" placeholder="Search projects...">
                </div>
            </div>
            <div id="projects-content" class="projects-grid">
                <div class="empty-state">
                    <i class="fas fa-folder-open"></i>
                    <p>No projects yet. Create your first project to get started!</p>
                </div>
            </div>
        </section>

        <!-- Kanban Page -->
        <section id="page-kanban" class="page">
            <div class="page-header">
                <div>
                    <h2 class="page-title">Task Board</h2>
                    <p class="page-subtitle">Drag and drop tasks across columns</p>
                </div>
                <div class="page-header-actions">
                    <select id="kanban-project-filter" class="form-select">
                        <option value="">All Projects</option>
                    </select>
                    <button id="add-task-kanban-btn" class="btn btn-primary">
                        <i class="fas fa-plus"></i> New Task
                    </button>
                </div>
            </div>
            <div id="kanban-content" class="kanban-board">
                <div class="empty-state">
                    <i class="fas fa-columns"></i>
                    <p>No tasks yet. Create tasks from a project or add one here!</p>
                </div>
            </div>
        </section>

        <!-- Activity Log Page -->
        <section id="page-activity" class="page">
            <div class="page-header">
                <div>
                    <h2 class="page-title">Activity Log</h2>
                    <p class="page-subtitle">Track your daily work</p>
                </div>
                <button id="add-activity-btn" class="btn btn-primary">
                    <i class="fas fa-plus"></i> Log Activity
                </button>
            </div>
            <div id="activity-quick-add" class="quick-add-bar" style="display:none;">
                <input type="text" id="quick-activity-input" class="form-input" placeholder="Quick log: what did you just do?">
                <select id="quick-activity-category" class="form-select">
                    <option value="other">Other</option>
                    <option value="build">Build</option>
                    <option value="deploy">Deploy</option>
                    <option value="meeting">Meeting</option>
                    <option value="research">Research</option>
                    <option value="support">Support</option>
                </select>
                <button id="quick-activity-submit" class="btn btn-primary btn-sm" aria-label="Submit quick activity">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            <div id="activity-filter-bar" class="filter-bar" style="display:none;">
                <select id="activity-project-filter" class="form-select">
                    <option value="">All Projects</option>
                </select>
                <select id="activity-category-filter" class="form-select">
                    <option value="">All Categories</option>
                    <option value="build">Build</option>
                    <option value="deploy">Deploy</option>
                    <option value="meeting">Meeting</option>
                    <option value="research">Research</option>
                    <option value="support">Support</option>
                    <option value="other">Other</option>
                </select>
                <input type="date" id="activity-date-from" class="form-input" title="From date">
                <input type="date" id="activity-date-to" class="form-input" title="To date">
                <div class="search-input">
                    <i class="fas fa-search"></i>
                    <input type="text" id="activity-search" class="form-input" placeholder="Search activities...">
                </div>
            </div>
            <div id="activity-content" class="activity-timeline">
                <div class="empty-state">
                    <i class="fas fa-clock"></i>
                    <p>No activities logged yet. Start tracking your daily work!</p>
                </div>
            </div>
            <div id="activity-pagination" class="pagination" style="display:none;"></div>
        </section>

        <!-- Metrics Page -->
        <section id="page-metrics" class="page">
            <div class="page-header">
                <div>
                    <h2 class="page-title">Value Metrics</h2>
                    <p class="page-subtitle">Measure your impact</p>
                </div>
            </div>
            <div id="metrics-summary" class="metrics-summary" style="display:none;"></div>
            <div id="metrics-content" class="metrics-grid">
                <div class="empty-state">
                    <i class="fas fa-chart-line"></i>
                    <p>No metrics yet. Add metrics to your projects to track ROI!</p>
                </div>
            </div>
        </section>

        <!-- Reports Page -->
        <section id="page-reports" class="page">
            <div class="page-header">
                <div>
                    <h2 class="page-title">Reports</h2>
                    <p class="page-subtitle">Generate one-on-one reports for your manager</p>
                </div>
                <div class="page-header-actions">
                    <button id="print-report-btn" class="btn btn-outline" style="display:none;">
                        <i class="fas fa-print"></i> Print
                    </button>
                    <button id="export-md-btn" class="btn btn-outline" style="display:none;">
                        <i class="fas fa-file-export"></i> Markdown
                    </button>
                </div>
            </div>
            <div class="report-config" id="report-config">
                <h4 class="report-config-title"><i class="fas fa-sliders-h"></i> Report Configuration</h4>
                <div class="report-config-row">
                    <div class="form-group">
                        <label class="form-label">Date Range</label>
                        <select id="report-date-preset" class="form-select">
                            <option value="last-week">Last Week</option>
                            <option value="last-2-weeks" selected>Last 2 Weeks</option>
                            <option value="last-month">Last Month</option>
                            <option value="custom">Custom</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">From</label>
                        <input type="date" id="report-date-from" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">To</label>
                        <input type="date" id="report-date-to" class="form-input">
                    </div>
                    <div class="form-group" style="align-self:flex-end;">
                        <button id="generate-report-btn" class="btn btn-primary">
                            <i class="fas fa-magic"></i> Generate Report
                        </button>
                    </div>
                </div>
                <div class="report-config-toggles">
                    <label class="report-toggle-label">
                        <input type="checkbox" id="report-show-completed" checked> Completed Work
                    </label>
                    <label class="report-toggle-label">
                        <input type="checkbox" id="report-show-progress" checked> In Progress
                    </label>
                    <label class="report-toggle-label">
                        <input type="checkbox" id="report-show-upcoming" checked> Coming Up
                    </label>
                    <label class="report-toggle-label">
                        <input type="checkbox" id="report-show-blockers" checked> Blockers
                    </label>
                    <label class="report-toggle-label">
                        <input type="checkbox" id="report-show-activities" checked> Activity Highlights
                    </label>
                    <label class="report-toggle-label">
                        <input type="checkbox" id="report-show-metrics" checked> Value Delivered
                    </label>
                </div>
            </div>
            <div id="report-preview-area"></div>
        </section>

        <!-- Settings Page -->
        <section id="page-settings" class="page">
            <div class="page-header">
                <div>
                    <h2 class="page-title">Settings</h2>
                    <p class="page-subtitle">Configure your workspace</p>
                </div>
            </div>
            <div class="settings-content">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-user"></i> Profile</h3>
                    <div class="form-group">
                        <label class="form-label" for="setting-name">Your Name</label>
                        <input type="text" id="setting-name" class="form-input" placeholder="e.g., John Doe">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="setting-title">Job Title</label>
                        <input type="text" id="setting-title" class="form-input" placeholder="e.g., Analyst">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="setting-boss">Manager's Name</label>
                        <input type="text" id="setting-boss" class="form-input" placeholder="e.g., Jane Smith">
                    </div>
                    <button id="save-settings-btn" class="btn btn-primary">
                        <i class="fas fa-save"></i> Save Settings
                    </button>
                </div>

                <div class="card">
                    <h3 class="card-title"><i class="fas fa-palette"></i> Appearance</h3>
                    <div class="form-group">
                        <label class="form-label">Theme</label>
                        <div class="theme-toggle-group">
                            <button id="theme-light" class="btn btn-outline">
                                <i class="fas fa-sun"></i> Light
                            </button>
                            <button id="theme-dark" class="btn btn-outline active">
                                <i class="fas fa-moon"></i> Dark
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><i class="fas fa-cloud"></i> Cloud Sync</h3>
                    <div id="auth-section-signed-out">
                        <p class="text-muted">Sign in to sync your data across devices.</p>
                        <button id="sign-in-btn" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i> Sign In
                        </button>
                    </div>
                    <div id="auth-section-signed-in" style="display:none;">
                        <p class="text-muted">Signed in as <strong id="auth-user-email"></strong></p>
                        <div class="btn-group" style="margin-top:12px;">
                            <button id="sync-now-btn" class="btn btn-outline">
                                <i class="fas fa-sync"></i> Sync Now
                            </button>
                            <button id="sign-out-btn" class="btn btn-outline">
                                <i class="fas fa-sign-out-alt"></i> Sign Out
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><i class="fas fa-database"></i> Data</h3>
                    <div class="btn-group">
                        <button id="export-data-btn" class="btn btn-outline">
                            <i class="fas fa-download"></i> Export Data
                        </button>
                        <button id="import-data-btn" class="btn btn-outline">
                            <i class="fas fa-upload"></i> Import Data
                        </button>
                    </div>
                    <input type="file" id="import-file-input" accept=".json" style="display:none;">
                </div>
            </div>
        </section>
    </main>

    <!-- Metrics Modal -->
    <div id="metrics-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="metrics-modal-title">
        <div class="modal">
            <div class="modal-header">
                <h3 id="metrics-modal-title" class="modal-title">Edit Metrics</h3>
                <button class="btn-icon" onclick="app.closeModal('metrics-modal')" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="metrics-id">
                <input type="hidden" id="metrics-project-id">
                <div class="form-group">
                    <label class="form-label" for="metrics-hours-to-run">Manual Hours to Run (per run)</label>
                    <input type="number" id="metrics-hours-to-run" class="form-input" min="0" step="0.25" placeholder="e.g., 2.5">
                    <p class="form-hint">How many hours does this process take manually per run?</p>
                </div>
                <div class="form-group">
                    <label class="form-label" for="metrics-runs-per-week">Runs Per Week</label>
                    <input type="number" id="metrics-runs-per-week" class="form-input" min="0" step="1" placeholder="e.g., 5">
                </div>
                <div class="form-group">
                    <label class="form-label" for="metrics-run-duration">Automated Run Duration (minutes)</label>
                    <input type="number" id="metrics-run-duration" class="form-input" min="0" step="1" placeholder="e.g., 15">
                    <p class="form-hint">How long does the automated process take per run?</p>
                </div>
                <div class="form-group">
                    <label class="form-label" for="metrics-hours-to-build">Hours to Build</label>
                    <input type="number" id="metrics-hours-to-build" class="form-input" min="0" step="0.5" placeholder="e.g., 40">
                    <p class="form-hint">Total development hours invested</p>
                </div>
                <div class="form-group">
                    <label class="form-label" for="metrics-people-impacted">People Impacted</label>
                    <input type="number" id="metrics-people-impacted" class="form-input" min="0" step="1" placeholder="e.g., 10">
                </div>
                <div id="metrics-live-preview" class="card" style="margin-top:16px;background:var(--bg);"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="app.closeModal('metrics-modal')">Cancel</button>
                <button id="save-metrics-btn" class="btn btn-primary">
                    <i class="fas fa-save"></i> Save Metrics
                </button>
            </div>
        </div>
    </div>

    <!-- Activity Modal -->
    <div id="activity-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="activity-modal-title">
        <div class="modal">
            <div class="modal-header">
                <h3 id="activity-modal-title" class="modal-title">Log Activity</h3>
                <button class="btn-icon" onclick="app.closeModal('activity-modal')" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="activity-id">
                <div class="form-group">
                    <label class="form-label" for="activity-entry">What did you do? *</label>
                    <textarea id="activity-entry" class="form-textarea" placeholder="Describe your work..." required maxlength="1000"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="activity-project">Project</label>
                    <select id="activity-project-select" class="form-select">
                        <option value="">No project</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="activity-task">Task</label>
                    <select id="activity-task-select" class="form-select">
                        <option value="">No task</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="activity-category-select">Category</label>
                    <select id="activity-category-select" class="form-select">
                        <option value="other">Other</option>
                        <option value="build">Build</option>
                        <option value="deploy">Deploy</option>
                        <option value="meeting">Meeting</option>
                        <option value="research">Research</option>
                        <option value="support">Support</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="activity-date-input">Date</label>
                    <input type="date" id="activity-date-input" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label" for="activity-tags-input">Tags</label>
                    <input type="text" id="activity-tags-input" class="form-input" placeholder="Comma-separated tags">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="app.closeModal('activity-modal')">Cancel</button>
                <button id="save-activity-btn" class="btn btn-primary">
                    <i class="fas fa-save"></i> Save Activity
                </button>
            </div>
        </div>
    </div>

    <!-- Task Modal -->
    <div id="task-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="task-modal-title">
        <div class="modal">
            <div class="modal-header">
                <h3 id="task-modal-title" class="modal-title">New Task</h3>
                <button class="btn-icon" onclick="app.closeModal('task-modal')" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="task-id">
                <div class="form-group">
                    <label class="form-label" for="task-name">Task Name *</label>
                    <input type="text" id="task-name" class="form-input" placeholder="e.g., Build error handling module" required maxlength="200">
                </div>
                <div class="form-group">
                    <label class="form-label" for="task-description">Description</label>
                    <textarea id="task-description" class="form-textarea" placeholder="Details about this task..." maxlength="1000"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="task-project">Project *</label>
                    <select id="task-project" class="form-select" required>
                        <option value="">Select a project...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="task-status">Status</label>
                    <select id="task-status" class="form-select">
                        <option value="backlog">Backlog</option>
                        <option value="this-week">This Week</option>
                        <option value="in-progress">In Progress</option>
                        <option value="blocked">Blocked</option>
                        <option value="done">Done</option>
                    </select>
                </div>
                <div class="form-group" id="task-blocker-group" style="display:none;">
                    <label class="form-label" for="task-blocker">Blocker Note</label>
                    <textarea id="task-blocker" class="form-textarea" placeholder="What's blocking this task?" maxlength="500"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="task-priority">Priority</label>
                    <select id="task-priority" class="form-select">
                        <option value="1">1 - Low</option>
                        <option value="2">2 - Below Normal</option>
                        <option value="3" selected>3 - Normal</option>
                        <option value="4">4 - High</option>
                        <option value="5">5 - Critical</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="task-due-date">Due Date</label>
                    <input type="date" id="task-due-date" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label" for="task-tags">Tags</label>
                    <input type="text" id="task-tags" class="form-input" placeholder="Comma-separated tags">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="app.closeModal('task-modal')">Cancel</button>
                <button id="save-task-btn" class="btn btn-primary">
                    <i class="fas fa-save"></i> Save Task
                </button>
            </div>
        </div>
    </div>

    <!-- Project Detail Modal -->
    <div id="project-detail-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="project-detail-title">
        <div class="modal modal-lg">
            <div class="modal-header">
                <h3 id="project-detail-title" class="modal-title">Project Details</h3>
                <button class="btn-icon" onclick="app.closeModal('project-detail-modal')" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="project-detail-body">
            </div>
        </div>
    </div>

    <!-- Project Modal -->
    <div id="project-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="project-modal-title">
        <div class="modal">
            <div class="modal-header">
                <h3 id="project-modal-title" class="modal-title">New Project</h3>
                <button class="btn-icon" onclick="app.closeModal('project-modal')" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="project-id">
                <div class="form-group">
                    <label class="form-label" for="project-name">Project Name *</label>
                    <input type="text" id="project-name" class="form-input" placeholder="e.g., Monthly Reporting Script" required maxlength="100">
                </div>
                <div class="form-group">
                    <label class="form-label" for="project-description">Description</label>
                    <textarea id="project-description" class="form-textarea" placeholder="Brief description of the project..." maxlength="500"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="project-status">Status</label>
                    <select id="project-status" class="form-select">
                        <option value="active">Active</option>
                        <option value="on-hold">On Hold</option>
                        <option value="completed">Completed</option>
                        <option value="archived">Archived</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="project-priority">Priority</label>
                    <select id="project-priority" class="form-select">
                        <option value="1">1 - Low</option>
                        <option value="2">2 - Below Normal</option>
                        <option value="3" selected>3 - Normal</option>
                        <option value="4">4 - High</option>
                        <option value="5">5 - Critical</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="project-tags">Tags</label>
                    <input type="text" id="project-tags" class="form-input" placeholder="Comma-separated: scripting, finance, reporting">
                    <p class="form-hint">Separate tags with commas</p>
                </div>
                <div class="form-group">
                    <label class="form-label">Color</label>
                    <div class="color-options" id="project-color-options">
                        <div class="color-option selected" data-color="#0d9488" style="background:#0d9488;" tabindex="0" role="radio" aria-label="Teal"></div>
                        <div class="color-option" data-color="#2563eb" style="background:#2563eb;" tabindex="0" role="radio" aria-label="Blue"></div>
                        <div class="color-option" data-color="#7c3aed" style="background:#7c3aed;" tabindex="0" role="radio" aria-label="Purple"></div>
                        <div class="color-option" data-color="#dc2626" style="background:#dc2626;" tabindex="0" role="radio" aria-label="Red"></div>
                        <div class="color-option" data-color="#d97706" style="background:#d97706;" tabindex="0" role="radio" aria-label="Amber"></div>
                        <div class="color-option" data-color="#16a34a" style="background:#16a34a;" tabindex="0" role="radio" aria-label="Green"></div>
                        <div class="color-option" data-color="#db2777" style="background:#db2777;" tabindex="0" role="radio" aria-label="Pink"></div>
                        <div class="color-option" data-color="#64748b" style="background:#64748b;" tabindex="0" role="radio" aria-label="Gray"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="app.closeModal('project-modal')">Cancel</button>
                <button id="save-project-btn" class="btn btn-primary">
                    <i class="fas fa-save"></i> Save Project
                </button>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="auth-modal-title">
        <div class="modal modal-sm">
            <div class="modal-header">
                <h3 id="auth-modal-title" class="modal-title">Sign In to WorkPulse</h3>
                <button class="btn-icon" onclick="app.closeModal('auth-modal')" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <button id="google-sign-in-btn" class="btn-google" style="width:100%;justify-content:center;">
                    <svg width="18" height="18" viewBox="0 0 48 48"><path fill="#4285F4" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/><path fill="#34A853" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/><path fill="#EA4335" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/></svg>
                    Sign in with Google
                </button>
                <div class="auth-divider">or</div>
                <form id="auth-email-form">
                    <div class="form-group">
                        <label class="form-label" for="auth-email">Email</label>
                        <input type="email" id="auth-email" class="form-input" placeholder="your@email.com" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="auth-password">Password</label>
                        <input type="password" id="auth-password" class="form-input" placeholder="Password (min 6 chars)" required minlength="6">
                    </div>
                    <div class="btn-group" style="margin-top:16px;">
                        <button type="submit" class="btn btn-primary" style="flex:1;">Sign In</button>
                        <button type="button" id="auth-register-btn" class="btn btn-outline" style="flex:1;">Register</button>
                    </div>
                </form>
                <p id="auth-error" class="text-danger" style="margin-top:12px;font-size:0.8125rem;display:none;"></p>
            </div>
        </div>
    </div>

    <!-- Confirm Dialog Modal -->
    <div id="confirm-dialog" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="confirm-dialog-title">
        <div class="modal modal-sm">
            <div class="modal-header">
                <h3 id="confirm-dialog-title" class="modal-title">Confirm</h3>
            </div>
            <div class="modal-body">
                <p id="confirm-dialog-message"></p>
            </div>
            <div class="modal-footer">
                <button id="confirm-dialog-cancel" class="btn btn-outline">Cancel</button>
                <button id="confirm-dialog-ok" class="btn btn-danger">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Keyboard Shortcuts Overlay -->
    <div id="shortcuts-overlay" class="shortcuts-overlay" role="dialog" aria-modal="true" aria-label="Keyboard shortcuts">
        <div class="shortcuts-panel">
            <div class="shortcuts-header">
                <h3><i class="fas fa-keyboard"></i> Keyboard Shortcuts</h3>
                <button class="btn-icon" onclick="app.hideShortcutsOverlay()" aria-label="Close"><i class="fas fa-times"></i></button>
            </div>
            <div class="shortcuts-grid">
                <div class="shortcuts-group">
                    <h4>Navigation</h4>
                    <div class="shortcut-row"><kbd>D</kbd><span>Dashboard</span></div>
                    <div class="shortcut-row"><kbd>B</kbd><span>Task Board</span></div>
                    <div class="shortcut-row"><kbd>L</kbd><span>Activity Log</span></div>
                    <div class="shortcut-row"><kbd>Ctrl+K</kbd><span>Command Palette</span></div>
                </div>
                <div class="shortcuts-group">
                    <h4>Actions</h4>
                    <div class="shortcut-row"><kbd>N</kbd><span>New Task</span></div>
                    <div class="shortcut-row"><kbd>A</kbd><span>Log Activity</span></div>
                    <div class="shortcut-row"><kbd>P</kbd><span>New Project</span></div>
                    <div class="shortcut-row"><kbd>T</kbd><span>Toggle Theme</span></div>
                    <div class="shortcut-row"><kbd>?</kbd><span>This Help</span></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Command Palette -->
    <div id="command-palette" class="command-palette-overlay" role="dialog" aria-modal="true" aria-label="Command palette">
        <div class="command-palette">
            <div class="command-palette-input-wrap">
                <i class="fas fa-search"></i>
                <input type="text" id="command-palette-input" class="command-palette-input" placeholder="Type a command or search..." autocomplete="off">
                <kbd>Esc</kbd>
            </div>
            <div id="command-palette-results" class="command-palette-results"></div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container" aria-live="polite"></div>

    <script src="app.js"></script>
</body>
</html>
